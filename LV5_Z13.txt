#include <stdio.h>
#define epsilon 0.0001

double f(double x){return x*x-2*x+3;}
double g(double x){return x;}
double presjek(double A, double B, int* status){
    double H,a,b,ha,hb,hh,presjek1;
    a=A;
    b=B;
    H=(A+B)/2;
    /*ha=f(a)-g(a);
    hb=f(b)-g(b);
    hh=f(H)-g(H);
    if(ha-hb<epsilon&&ha-hb>-epsilon&&ha-hh<epsilon&&ha-hh>-epsilon){
        *status=2;
        return 0;
    }*/
    while(*status!=2){
        
        ha=f(a)-g(a);
        hb=f(b)-g(b);
        hh=f(H)-g(H);
        if(ha-hb<epsilon&&ha-hb>-epsilon&&ha-hh<epsilon&&ha-hh>-epsilon){
            *status=2;
            return 0;
        }
        //printf("\n %g %g %g\n",ha,hb,hh);
        if(ha<epsilon&&ha>-epsilon) {*status=0;return a;}
        if(hb<epsilon&&hb>-epsilon) {*status=0;return b;}
        if(hh<epsilon&&hh>-epsilon) {*status=0;return H;}
        //printf("\ntacke: a=%g b=%g h=%g\n     ha=%g hb=%g hh=%g\n",a,b,H,ha,hb,hh);
        if(((ha>epsilon && hh<-epsilon)||(ha<-epsilon&&hh>epsilon))&&((hb>epsilon&&hh<-epsilon)||(hb<-epsilon&&hh>epsilon))){
            b=H;
        }
        else if(ha>epsilon&&hh<-epsilon)b=H;
        else if(ha<-epsilon&&hh>epsilon)b=H;
        else if(hb>epsilon&&hh<-epsilon)a=H;
        else if(hb<-epsilon&&hh>epsilon)a=H;
        else {
            if(((b-a)<0.01)&&((b-a)>-0.01))break;//{ printf("\n%g %g\n",a,b);break;}
        
            presjek1=presjek(a,H,&*status);
            //printf("\n%g",presjek1);
            if(presjek1<epsilon&&presjek1>-epsilon)presjek1=presjek(H,b,&*status);
            if(*status==0) return presjek1;
            if(presjek1<epsilon&&presjek1>-epsilon) break;
            
            
        }
        H=(a+b)/2;
        
        
    }

    *status=1;
    return 0;
}

int main() {
	int status=-1;
    double rez=presjek(0,100,&status);
    printf("\n%.g %d",rez,status);
	return 0;
}
