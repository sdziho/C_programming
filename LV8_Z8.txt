#include <stdio.h>
#include <stdlib.h>
#include <math.h>
struct Tacka{
    int x,y;
};
struct Cetverougao{
    struct Tacka A,B,C,D;
};
struct Tacka unos_tacke(){
    struct Tacka t;
    scanf("%d %d",&t.x,&t.y);
    return t;
}
struct Cetverougao unos_cetverougla(){
    struct Cetverougao c;
    c.A=unos_tacke();
    c.B=unos_tacke();
    c.C=unos_tacke();
    c.D=unos_tacke();
    
    return c;
}
double daj_duzinu(struct Tacka A, struct Tacka B){
    return sqrt((double)(A.x-B.x)*(A.x-B.x)+(A.y-B.y)*(A.y-B.y));
}
double daj_povrsinu(struct Tacka A, struct Tacka B,struct Tacka C){
    return (abs(A.x*(B.y-C.y)+B.x*(C.y-A.y)+C.x*(A.y-B.y)))/2.0;
}
int pravougaonik(struct Cetverougao c){
    double AB=daj_duzinu(c.A,c.B);
    double AC=daj_duzinu(c.A,c.C);
    double AD=daj_duzinu(c.A,c.D);
    double BC=daj_duzinu(c.C,c.B);
    double BD=daj_duzinu(c.B,c.D);
    double CD=daj_duzinu(c.C,c.D);

    if(AB==CD&&AC==BD&&AD==BC)return 1;
    if(AC==BD&&AB==CD&&AD==BC)return 1;
    if(AD==BC&&AB==CD&&AC==BD)return 1;

    return 0;
}

int kvadrat(struct Cetverougao c){
    double AB=daj_duzinu(c.A,c.B);
    double AC=daj_duzinu(c.A,c.C);
    double AD=daj_duzinu(c.A,c.D);
    if(AB==AD && AC==daj_duzinu(c.D, c.B)) return 1;
    if(AB==AC && AD==daj_duzinu(c.C, c.B)) return 1;
    if(AC==AD && AB==daj_duzinu(c.D, c.C)) return 1;

    return 0;
}

int tacka_u_cetverouglu(struct Tacka t, struct Cetverougao c){
    struct Tacka tacke[4],temp,gore1,gore2,dole1,dole2;
    tacke[0]=c.A;
    tacke[1]=c.B;
    tacke[2]=c.C;
    tacke[3]=c.D;
    int i,j;
    for(i=0;i<3;i++){
        for(j=i;j<4;j++){
            if(tacke[j].x>tacke[i].x){
                temp=tacke[j];
                tacke[j]=tacke[i];
                tacke[i]=temp;
            }
        }
    }
    if(tacke[0].y>tacke[1].y){
        gore1=tacke[0];
        dole1=tacke[1];
    }
    else{
        gore1=tacke[1];
        dole1=tacke[0];
    }

    if(tacke[2].y>tacke[3].y){
        gore2=tacke[2];
        dole2=tacke[3];
    }
    else{
        gore2=tacke[3];
        dole2=tacke[2];
    }

    double P=(double)daj_povrsinu(gore1, gore2, dole1)+daj_povrsinu(gore2, dole1, dole2);

    double P1=daj_povrsinu(t, gore1, dole1);
    double P2=daj_povrsinu(t, dole1, dole2);
    double P3=daj_povrsinu(t, dole2, gore2);
    double P4=daj_povrsinu(t, gore2, gore1);
    if(P1==0||P2==0||P3==0||P4==0)return 0;
    double T=P1+P2+P3+P4;
    if(T==P) return 1;
    
    return 0;
}

int filtriraj_tacke(struct Tacka *t,int vel, struct Cetverougao c){
    int i,j;
    for(i=0;i<vel;i=i+1){
        if(tacka_u_cetverouglu(t[i],c)==0){
            for(j=i;j<vel-1;j++)t[j]=t[j+1];
            vel--;
            i--;
        }
    }
    return vel;
}

void sortiraj_tacke(struct Tacka *t, int vel){
    int i,j;
    struct Tacka temp,nula;
    nula.x=0;
    nula.y=0;
    for(i=0;i<vel-1;i++){
        for(j=i;j<vel;j++){
            if(daj_duzinu(t[j],nula)<daj_duzinu(t[i], nula)){
                temp=t[i];
                t[i]=t[j];
                t[j]=temp;
            }
        }
    }
}
int main() {
    int n,i;
    struct Tacka t[100];
    struct Cetverougao c;
    printf("Unesi velicinu: ");
    scanf("%d",&n);
    printf("Unesi niz tacaka: ");
    for(i=0;i<n;i++) t[i]=unos_tacke();
    printf("Unesi cetverougao: ");
	c=unos_cetverougla();
    if(pravougaonik(c)==1)printf("Ovo je pravougaonik\n");
    else printf("Ovo nije pravougaonik\n");
    if(kvadrat(c)==1)printf("Ovo je kvadrat\n");
    else printf("Ovo nije kvadrat\n");
    int vel=filtriraj_tacke(t, n, c);
    sortiraj_tacke(t, vel);
    for(i=0;i<vel;i++){
        if(i!=vel-1) printf("(%d,%d),",t[i].x,t[i].y);
        else printf("(%d,%d)",t[i].x,t[i].y);
    }
	return 0;
}
